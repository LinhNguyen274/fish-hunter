const _G="undefined"==typeof window?global:window,money_formater_arr=[{div:1e9,dex:"B"},{div:1e6,dex:"M"},{div:1e3,dex:"K"}],money_formater_mechanic=function(t,e,n){return(t/e).toFixed(1).replace(/\.0$/,"")+n},dayMMS=864e5,uuid_generator=function(){return`${random_character()}_${Date.now()}_${Math.floor(900*Math.random())+100}`};function random_character(t=!1){const e=26*Math.random()>>0,n=t?Math.random()<.5?65:97:65;return String.fromCharCode(n+e)}class Tween{}class Signal{constructor(){this._container={}}add(t,e,...n){const o={},i=[e,...n].flat();for(const r of i)o[r.id||uuid_generator()]="function"==typeof r?r:r.method;return this._container[t]={...this._container[t],...o},Object.keys(o)}invoke(t){this._container[t]}removes(t,e,...n){}clean(t){}}class pTSHelper{constructor(){this.random_character=random_character,this.uuid_generator=uuid_generator,this.builtin={},this.fxc={},this.signal=new Signal,this.tween=new Tween}add_click_event_for_button(t,e,n,o,i){const r=e.getComponent(n);if(!r)return;if(!Object.getOwnPropertyNames(r.constructor.prototype).includes(o))return;const a=new cc.Component.EventHandler;a.target=e,a.component="string"==typeof n?n:cc.js.getClassName(r),a.handler=o,a.customEventData=i,t.clickEvents.push(a)}set_click_event_for_button(t,e,n,o,i){t.clickEvents=[],this.add_click_event_for_button(t,e,n,o,i)}is_vec2_equal(t,e){return t.x==e.x&&t.y===e.y}is_vec3_equal(t,e){return t.x==e.x&&t.y===e.y&&t.z===e.z}get_local_position(t,e){if(e instanceof cc.Node){if(t.parent===e.parent)return e.position;const n=e.convertToWorldSpaceAR(cc.v3());return t.parent.convertToNodeSpaceAR(n)}return e.is_world_pos?t.parent.convertToNodeSpaceAR(e.position):e.position}set_position(t,e){t.setPosition(this.get_local_position(t,e))}chain_sp_anim(t,e,n){const o=e.length;this.settup_skeleton(t,n);const i=null==n.loop_at_end||n.loop_at_end,r=null!=n.anim_track_id?n.anim_track_id:0;if(o>=2){target.setAnimation(0,e[0],!1);for(let n=0;n<o;n++)n===o-1&&i?t.addAnimation(r,e[n],!0):t.addAnimation(r,e[n],!1)}else t.setAnimation(r,r[0],i)}settup_skeleton(t,e){if(!e||!t)return;const n=null!=e.time_scale?e.time_scale:t.timeScale;t.timeScale=n;const o=e.mixin;o&&o.enable&&this.mixin_skeleton(t,o)}mixin_skeleton(t,e){const n=new sp.spine.AnimationStateData(t.skeletonData.getRuntimeData()),o=null!=e&&null!=e.default_mixin_duration?e.default_mixin_duration:1/6;if(n.defaultMix=o,null!=e&&null!=e.options)for(const i of e.options)n.setMix(i.from,i.to,i.duration);t.setAnimationStateData(n)}get_possible_component(t,...e){for(const n of e){const e=t.getComponent(n);if(e)return e}return null}number_to_short_money(t){for(const e of money_formater_arr)if(t>=e.div)return money_formater_mechanic(t,e.div,e.dex);return t.toString()}en_number(t){return t.toLocaleString("en-US").replace(/,/g,".")}check_component_in_prefab(t,e,n=!1){return!1}to_date_day_num(t){return Math.floor(t/dayMMS)}day_differ(t){return this.to_date_day_num(Date.now())-this.to_date_day_num(t)}random_int(t,e){return t=Math.ceil(t),t=Math.ceil(e),Math.floor(Math.random()*(e-t+1))+t}editbox_binder(t,e,n,o=null){if(!t instanceof cc.EditBox)return;if(!t._impl)return;const i=t._impl._elem;i&&i.addEventListener(e,n,o)}game_focus(){cc.sys.isBrowser&&document.getElementsByTagName("canvas")[0].focus()}}const ret=new pTSHelper;_G.pTS=ret,cc._opts={loading:{is:!1,__cbs:[],end:function(){this.is=!1;for(const t of this.__cbs)t&&t();this.__cbs=[]},add_callback_on_done:function(t,...e){if("function"==typeof t)this.__cbs.push(t);else if(Array.isArray(t))for(const n of t)this.__cbs.push(n);for(const n of e)this.__cbs.push(n)},start:function(){this.is=!0,this.__cbs=[]}}},cc.EditBox.Events={begin_editing:"editing-did-began",end_editing:"editing-did-ended",on_editing:"text-changed",return:"editing-return"};